#!/bin/sh
# Name: KindleForge
# Author: Penguins
# Icon: data:image/png;base64,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
# DontUseFBInk

SOURCE_DIR="/mnt/us/documents/KindleForge"
TARGET_DIR="/var/local/mesquite/KindleForge"
DB="/var/local/appreg.db"
APP_ID="xyz.penguins184.kindleforge"

BINARY="$SOURCE_DIR/binaries/UtildSF"
OTHER="$SOURCE_DIR/binaries/UtildHF"
[ -e /lib/ld-linux-armhf.so.3 ] && BINARY="$SOURCE_DIR/binaries/UtildHF" && OTHER="$SOURCE_DIR/binaries/UtildSF"

[ -e "$BINARY" ] && cp "$BINARY" /var/local/kmc/

if [ -e /lib/ld-linux-armhf.so.3 ] && [ -e /var/local/kmc/UtildHF ]; then
    chmod +x /var/local/kmc/UtildHF
    /var/local/kmc/UtildHF
elif [ -e /var/local/kmc/UtildSF ]; then
    chmod +x /var/local/kmc/UtildSF
    /var/local/kmc/UtildSF
fi

[ -e "$OTHER" ] && rm -f "$OTHER"

if [ ! -d "$SOURCE_DIR/binaries" ] && [ -d "$TARGET_DIR/binaries" ]; then
    mv "$TARGET_DIR/binaries" /tmp/binaries_backup
fi

[ -d "$TARGET_DIR" ] && rm -rf "$TARGET_DIR"
[ -d "$SOURCE_DIR" ] && cp -r "$SOURCE_DIR" "$TARGET_DIR" || exit 1

[ -d /tmp/binaries_backup ] && mv /tmp/binaries_backup "$TARGET_DIR/binaries"

[ -d "$SOURCE_DIR/binaries" ] && rm -rf "$SOURCE_DIR/binaries"

sqlite3 "$DB" <<EOF
INSERT OR IGNORE INTO interfaces(interface) VALUES('application');
INSERT OR IGNORE INTO handlerIds(handlerId) VALUES('$APP_ID');
INSERT OR REPLACE INTO properties(handlerId,name,value) VALUES('$APP_ID','lipcId','$APP_ID');
INSERT OR REPLACE INTO properties(handlerId,name,value) VALUES('$APP_ID','command','/usr/bin/mesquite -l $APP_ID -c file://$TARGET_DIR/');
INSERT OR REPLACE INTO properties(handlerId,name,value) VALUES('$APP_ID','supportedOrientation','U');
EOF

echo Registered $APP_ID, You May Now Launch It With LIPC.
sleep 2

nohup lipc-set-prop com.lab126.appmgrd start app://$APP_ID >/dev/null 2>&1 &
